<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Camcookie AI Platform</title>
<style>
  body { background:#111; color:#0f0; font-family: monospace; padding:20px; max-width:900px; margin:auto; }
  textarea, input, select { background:#222; color:#0f0; border:1px solid #0f0; width:100%; font-size:16px; padding:10px; margin-top:10px; }
  button { background:#0f0; border:none; color:#000; padding:10px 20px; font-weight:bold; cursor:pointer; margin-top:10px; }
  button:hover { background:#0c0; }
  pre { background:#000; padding:10px; white-space:pre-wrap; min-height:80px; margin-top:10px; }
  img, audio, video { max-width:100%; display:block; margin-top:10px; border:1px solid #0f0; }
</style>
</head>
<body>
<h1>Camcookie AI Platform</h1>
<p><strong>Mode:</strong></p>
<select id="mode">
  <option value="text">Text / Code</option>
  <option value="image">Image</option>
  <option value="audio">Audio (mp3)</option>
  <option value="video">Video (mp4)</option>
  <option value="correct">Spell/Grammar Check</option>
</select>

<p><strong>Prompt:</strong></p>
<textarea id="prompt" rows="4" placeholder="Type something smart, weird, or creative..."></textarea>
<button onclick="generate()">Run AI</button>

<pre id="output"></pre>
<img id="img-output" />
<audio id="audio-output" controls></audio>
<video id="video-output" controls></video>
<a id="download-link" download style="display:none; color:#0f0; text-decoration:underline;">Download file</a>

<script>
const API = window.location.origin + "/generate";

async function generate() {
  const mode = document.getElementById("mode").value;
  const prompt = document.getElementById("prompt").value;
  const out = document.getElementById("output");
  const img = document.getElementById("img-output");
  const audio = document.getElementById("audio-output");
  const video = document.getElementById("video-output");
  const download = document.getElementById("download-link");
  out.textContent = "Loading...";
  img.src = "";
  audio.src = "";
  video.src = "";
  download.style.display = "none";

  try {
    const res = await fetch(API, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ mode, prompt, max_length: 150 })
    });
    const data = await res.json();

    if (mode === "text" || mode === "correct") {
      out.textContent = data.response;
    }
    if (mode === "image") {
      img.src = "data:image/png;base64," + data.response;
    }
    if (mode === "audio") {
      audio.src = "data:audio/mp3;base64," + data.audio_base64;
      download.href = audio.src;
      download.download = "ai-audio.mp3";
      download.textContent = "Download MP3";
      download.style.display = "block";
    }
    if (mode === "video") {
      video.src = "data:video/mp4;base64," + data.video_base64;
      download.href = video.src;
      download.download = "ai-video.mp4";
      download.textContent = "Download MP4";
      download.style.display = "block";
    }
  } catch (e) {
    out.textContent = "Error: " + e.message;
  }
}
</script>
</body>
</html>